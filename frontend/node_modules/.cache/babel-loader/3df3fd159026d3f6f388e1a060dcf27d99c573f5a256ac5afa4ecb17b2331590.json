{"ast":null,"code":"var _jsxFileName = \"/Users/parhamgolmohammadi/Sales/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport LoginPage from './pages/LoginPage';\nimport RegisterPage from './pages/RegisterPage';\nimport DashboardPage from './pages/DashboardPage';\nimport OrderDetailPage from './component/OrderDetailPage';\nimport CreateOrderPage from './component/CreateOrderPage';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport MainPage from \"./pages/MainPage\";\nimport AdminDashboardPage from \"./pages/AdminDashboardPage\";\nimport AdminOrderDetailPage from \"./component/AdminOrderDetailPage\";\nimport AdminRoute from \"./component/AdminRoute\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:8000/api/';\nfunction App() {\n  _s();\n  useEffect(() => {\n    console.log('üöÄ App initialization...');\n\n    // Get CSRF token\n    axios.get(`${API_URL}csrf/`, {\n      withCredentials: true\n    }).then(() => {\n      console.log('‚úÖ CSRF token obtained');\n    }).catch(err => console.error('‚ùå CSRF fetch failed:', err));\n\n    // Initialize authentication\n    const initializeAuth = () => {\n      const access_token = localStorage.getItem('access_token');\n      const refresh_token = localStorage.getItem('refresh_token');\n      const userData = localStorage.getItem('userData');\n      console.log('üîç App - Auth initialization:', {\n        hasAccessToken: !!access_token,\n        hasRefreshToken: !!refresh_token,\n        hasUserData: !!userData,\n        accessToken: access_token ? `${access_token.substring(0, 20)}...` : null\n      });\n      if (access_token && refresh_token && userData) {\n        // Set the authorization header for all future requests\n        axios.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n        console.log('‚úÖ Authorization header set for existing session');\n\n        // Verify token is still valid\n        axios.post(`${API_URL}auth/token/verify/`, {\n          token: access_token\n        }).then(() => {\n          console.log('‚úÖ Existing token is valid');\n        }).catch(error => {\n          var _error$response;\n          console.log('‚ùå Existing token is invalid:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n          // Token is invalid, clear everything\n          localStorage.removeItem('access_token');\n          localStorage.removeItem('refresh_token');\n          localStorage.removeItem('userData');\n          delete axios.defaults.headers.common['Authorization'];\n        });\n      } else {\n        console.log('‚ÑπÔ∏è No existing authentication found');\n        // Ensure no stale headers\n        delete axios.defaults.headers.common['Authorization'];\n      }\n    };\n    initializeAuth();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(MainPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 47\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/register\",\n        element: /*#__PURE__*/_jsxDEV(RegisterPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 50\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/dashboard\",\n        element: /*#__PURE__*/_jsxDEV(DashboardPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 51\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/admin\",\n        element: /*#__PURE__*/_jsxDEV(AdminRoute, {\n          children: /*#__PURE__*/_jsxDEV(AdminDashboardPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/admin/orders/:orderId\",\n        element: /*#__PURE__*/_jsxDEV(AdminRoute, {\n          children: /*#__PURE__*/_jsxDEV(AdminOrderDetailPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/orders/create\",\n        element: /*#__PURE__*/_jsxDEV(CreateOrderPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/orders/:orderId\",\n        element: /*#__PURE__*/_jsxDEV(OrderDetailPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 57\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"*\",\n        element: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Page not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["BrowserRouter","Router","Route","Routes","LoginPage","RegisterPage","DashboardPage","OrderDetailPage","CreateOrderPage","useEffect","axios","MainPage","AdminDashboardPage","AdminOrderDetailPage","AdminRoute","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","App","_s","console","log","get","withCredentials","then","catch","err","error","initializeAuth","access_token","localStorage","getItem","refresh_token","userData","hasAccessToken","hasRefreshToken","hasUserData","accessToken","substring","defaults","headers","common","post","token","_error$response","response","data","removeItem","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/parhamgolmohammadi/Sales/frontend/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport LoginPage from './pages/LoginPage';\nimport RegisterPage from './pages/RegisterPage';\nimport DashboardPage from './pages/DashboardPage';\nimport OrderDetailPage from './component/OrderDetailPage';\nimport CreateOrderPage from './component/CreateOrderPage';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport MainPage from \"./pages/MainPage\";\nimport AdminDashboardPage from \"./pages/AdminDashboardPage\";\nimport AdminOrderDetailPage from \"./component/AdminOrderDetailPage\";\nimport AdminRoute from \"./component/AdminRoute\";\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:8000/api/';\n\nfunction App() {\n    useEffect(() => {\n        console.log('üöÄ App initialization...');\n\n        // Get CSRF token\n        axios.get(`${API_URL}csrf/`, { withCredentials: true })\n            .then(() => {\n                console.log('‚úÖ CSRF token obtained');\n            })\n            .catch(err => console.error('‚ùå CSRF fetch failed:', err));\n\n        // Initialize authentication\n        const initializeAuth = () => {\n            const access_token = localStorage.getItem('access_token');\n            const refresh_token = localStorage.getItem('refresh_token');\n            const userData = localStorage.getItem('userData');\n\n            console.log('üîç App - Auth initialization:', {\n                hasAccessToken: !!access_token,\n                hasRefreshToken: !!refresh_token,\n                hasUserData: !!userData,\n                accessToken: access_token ? `${access_token.substring(0, 20)}...` : null\n            });\n\n            if (access_token && refresh_token && userData) {\n                // Set the authorization header for all future requests\n                axios.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n                console.log('‚úÖ Authorization header set for existing session');\n\n                // Verify token is still valid\n                axios.post(`${API_URL}auth/token/verify/`, { token: access_token })\n                    .then(() => {\n                        console.log('‚úÖ Existing token is valid');\n                    })\n                    .catch((error) => {\n                        console.log('‚ùå Existing token is invalid:', error.response?.data);\n                        // Token is invalid, clear everything\n                        localStorage.removeItem('access_token');\n                        localStorage.removeItem('refresh_token');\n                        localStorage.removeItem('userData');\n                        delete axios.defaults.headers.common['Authorization'];\n                    });\n            } else {\n                console.log('‚ÑπÔ∏è No existing authentication found');\n                // Ensure no stale headers\n                delete axios.defaults.headers.common['Authorization'];\n            }\n        };\n\n        initializeAuth();\n    }, []);\n\n    return (\n        <Router>\n            <Routes>\n                <Route path=\"/\" element={<MainPage />} />\n                <Route path=\"/login\" element={<LoginPage />} />\n                <Route path=\"/register\" element={<RegisterPage />} />\n                <Route path=\"/dashboard\" element={<DashboardPage />} />\n                <Route\n                    path=\"/admin\"\n                    element={\n                        <AdminRoute>\n                            <AdminDashboardPage />\n                        </AdminRoute>\n                    }\n                />\n                <Route\n                    path=\"/admin/orders/:orderId\"\n                    element={\n                        <AdminRoute>\n                            <AdminOrderDetailPage />\n                        </AdminRoute>\n                    }\n                />\n\n                <Route path=\"/orders/create\" element={<CreateOrderPage />} />\n                <Route path=\"/orders/:orderId\" element={<OrderDetailPage />} />\n                <Route path=\"*\" element={<div>Page not found</div>} />\n            </Routes>\n        </Router>\n    );\n}\n\nexport default App;"],"mappings":";;AAAA,SAASA,aAAa,IAAIC,MAAM,EAAEC,KAAK,EAAEC,MAAM,QAAQ,kBAAkB;AACzE,OAAOC,SAAS,MAAM,mBAAmB;AACzC,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,OAAOC,aAAa,MAAM,uBAAuB;AACjD,OAAOC,eAAe,MAAM,6BAA6B;AACzD,OAAOC,eAAe,MAAM,6BAA6B;AACzD,SAASC,SAAS,QAAQ,OAAO;AACjC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,kBAAkB,MAAM,4BAA4B;AAC3D,OAAOC,oBAAoB,MAAM,kCAAkC;AACnE,OAAOC,UAAU,MAAM,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,4BAA4B;AAE7E,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACXb,SAAS,CAAC,MAAM;IACZc,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;;IAEvC;IACAd,KAAK,CAACe,GAAG,CAAC,GAAGR,OAAO,OAAO,EAAE;MAAES,eAAe,EAAE;IAAK,CAAC,CAAC,CAClDC,IAAI,CAAC,MAAM;MACRJ,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;IACxC,CAAC,CAAC,CACDI,KAAK,CAACC,GAAG,IAAIN,OAAO,CAACO,KAAK,CAAC,sBAAsB,EAAED,GAAG,CAAC,CAAC;;IAE7D;IACA,MAAME,cAAc,GAAGA,CAAA,KAAM;MACzB,MAAMC,YAAY,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MACzD,MAAMC,aAAa,GAAGF,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;MAC3D,MAAME,QAAQ,GAAGH,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;MAEjDX,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAE;QACzCa,cAAc,EAAE,CAAC,CAACL,YAAY;QAC9BM,eAAe,EAAE,CAAC,CAACH,aAAa;QAChCI,WAAW,EAAE,CAAC,CAACH,QAAQ;QACvBI,WAAW,EAAER,YAAY,GAAG,GAAGA,YAAY,CAACS,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,GAAG;MACxE,CAAC,CAAC;MAEF,IAAIT,YAAY,IAAIG,aAAa,IAAIC,QAAQ,EAAE;QAC3C;QACA1B,KAAK,CAACgC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUZ,YAAY,EAAE;QACzET,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC;;QAE9D;QACAd,KAAK,CAACmC,IAAI,CAAC,GAAG5B,OAAO,oBAAoB,EAAE;UAAE6B,KAAK,EAAEd;QAAa,CAAC,CAAC,CAC9DL,IAAI,CAAC,MAAM;UACRJ,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;QAC5C,CAAC,CAAC,CACDI,KAAK,CAAEE,KAAK,IAAK;UAAA,IAAAiB,eAAA;UACdxB,OAAO,CAACC,GAAG,CAAC,8BAA8B,GAAAuB,eAAA,GAAEjB,KAAK,CAACkB,QAAQ,cAAAD,eAAA,uBAAdA,eAAA,CAAgBE,IAAI,CAAC;UACjE;UACAhB,YAAY,CAACiB,UAAU,CAAC,cAAc,CAAC;UACvCjB,YAAY,CAACiB,UAAU,CAAC,eAAe,CAAC;UACxCjB,YAAY,CAACiB,UAAU,CAAC,UAAU,CAAC;UACnC,OAAOxC,KAAK,CAACgC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;QACzD,CAAC,CAAC;MACV,CAAC,MAAM;QACHrB,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;QAClD;QACA,OAAOd,KAAK,CAACgC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;MACzD;IACJ,CAAC;IAEDb,cAAc,CAAC,CAAC;EACpB,CAAC,EAAE,EAAE,CAAC;EAEN,oBACIf,OAAA,CAACf,MAAM;IAAAkD,QAAA,eACHnC,OAAA,CAACb,MAAM;MAAAgD,QAAA,gBACHnC,OAAA,CAACd,KAAK;QAACkD,IAAI,EAAC,GAAG;QAACC,OAAO,eAAErC,OAAA,CAACL,QAAQ;UAAA2C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACzCzC,OAAA,CAACd,KAAK;QAACkD,IAAI,EAAC,QAAQ;QAACC,OAAO,eAAErC,OAAA,CAACZ,SAAS;UAAAkD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC/CzC,OAAA,CAACd,KAAK;QAACkD,IAAI,EAAC,WAAW;QAACC,OAAO,eAAErC,OAAA,CAACX,YAAY;UAAAiD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACrDzC,OAAA,CAACd,KAAK;QAACkD,IAAI,EAAC,YAAY;QAACC,OAAO,eAAErC,OAAA,CAACV,aAAa;UAAAgD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACvDzC,OAAA,CAACd,KAAK;QACFkD,IAAI,EAAC,QAAQ;QACbC,OAAO,eACHrC,OAAA,CAACF,UAAU;UAAAqC,QAAA,eACPnC,OAAA,CAACJ,kBAAkB;YAAA0C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACd;MACf;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC,eACFzC,OAAA,CAACd,KAAK;QACFkD,IAAI,EAAC,wBAAwB;QAC7BC,OAAO,eACHrC,OAAA,CAACF,UAAU;UAAAqC,QAAA,eACPnC,OAAA,CAACH,oBAAoB;YAAAyC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChB;MACf;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC,eAEFzC,OAAA,CAACd,KAAK;QAACkD,IAAI,EAAC,gBAAgB;QAACC,OAAO,eAAErC,OAAA,CAACR,eAAe;UAAA8C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC7DzC,OAAA,CAACd,KAAK;QAACkD,IAAI,EAAC,kBAAkB;QAACC,OAAO,eAAErC,OAAA,CAACT,eAAe;UAAA+C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC/DzC,OAAA,CAACd,KAAK;QAACkD,IAAI,EAAC,GAAG;QAACC,OAAO,eAAErC,OAAA;UAAAmC,QAAA,EAAK;QAAc;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClD;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEjB;AAACnC,EAAA,CAlFQD,GAAG;AAAAqC,EAAA,GAAHrC,GAAG;AAoFZ,eAAeA,GAAG;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}